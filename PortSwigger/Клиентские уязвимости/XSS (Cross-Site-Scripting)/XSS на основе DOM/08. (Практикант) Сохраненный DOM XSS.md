![image](https://github.com/user-attachments/assets/9d81d6ff-da94-4bec-aeb6-1df14ae30f38)![image](https://github.com/user-attachments/assets/d2b8d0c9-5d16-4431-bf9a-c554372bdcae)Веб-сайты также могут хранить данные на сервере и отражать их в другом месте. В уязвимости DOM XSS, хранимой в сохраненном состоянии, сервер получает данные из одного запроса, сохраняет их, а затем включает данные в более поздний ответ. Скрипт в более позднем ответе содержит приемник, который затем обрабатывает данные небезопасным способом.

element.innerHTML = comment.author

Эта лабораторная работа демонстрирует уязвимость сохраненного DOM в функциональности комментариев блога. Чтобы решить эту лабораторную работу, используйте эту уязвимость для вызова alert()функции.

1. Переходим к любому посту, видим форму комментария:

![image](https://github.com/user-attachments/assets/3ffc10de-0c71-45af-afa3-f0b9979ec6ab)

2. Вставляем в комментарий полезную нагрузку: <><img src=1 onerror=alert(1)>, а в остальные формы любые значения по их фильтрам:

![image](https://github.com/user-attachments/assets/8705ac56-0aec-4d33-bcbd-fb53ba1f5e38)

3. Переходим к посту в котором был оставлен комментарий.

В попытке предотвратить XSS веб-сайт использует replace()функцию JavaScript для кодирования угловых скобок. Однако, когда первый аргумент является строкой, функция заменяет только первое вхождение. Мы эксплуатируем эту уязвимость, просто включая дополнительный набор угловых скобок в начале комментария. Эти угловые скобки будут кодироваться, но любые последующие угловые скобки не будут затронуты, что позволяет нам эффективно обойти фильтр и внедрить HTML.
